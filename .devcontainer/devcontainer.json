{
	"name": "flowpipe-devcontainer",
	"image": "ghcr.io/turbot/flowpipe-devcontainer:latest",

	"mounts": [
		"source=${localWorkspaceFolder}/../flowpipe-sdk-go,target=/workspaces/flowpipe-sdk-go,type=bind,consistency=cached",
		"source=${localWorkspaceFolder}/../terraform-components,target=/workspaces/terraform-components,type=bind,consistency=cached",
		"source=${localWorkspaceFolder}/../pipe-fittings,target=/workspaces/pipe-fittings,type=bind,consistency=cached"
	],

	"containerEnv": {
		"GOPRIVATE=github.com/": "github.com/turbot/*"
	},

	"features": {
		"ghcr.io/devcontainers/features/docker-in-docker:2": {}
	},

	// Automatically remove the container when it is stopped (docker rm <container-name>)
	// not reliable: https://github.com/microsoft/vscode-remote-release/issues/3512
	"runArgs": ["--rm"],

	"customizations": {
		// Configure properties specific to VS Code.
		"vscode": {
		  // Add the IDs of extensions you want installed when the container is created.
		  "extensions": [
			"github.copilot",
			"eamodio.gitlens",
			"ms-azuretools.vscode-docker",
			"ms-vscode.makefile-tools",
			"hashicorp.terraform",
			"GitHub.vscode-github-actions",
			"HashiCorp.HCL"]
		}
	  }
}
